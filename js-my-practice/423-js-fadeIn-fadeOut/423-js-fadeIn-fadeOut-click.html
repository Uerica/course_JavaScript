<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Fade in, Fade out(onclick) </title>
</head>

<body>
	<center>
		<input type="button" id="btnInOut" value="淡出"><br>
		<img src="melon.gif" alt="小玉" id="img1" style="opacity:1">
	</center>
</body>

</html>
<script>
	var opacity = 1;
	var fadeOut;
	var timerId;

	

	function $id(id) {			//寫個抓id function yoyo
		return document.getElementById(id);
	}


	function changeOpacity() {
		var img = $id("img1"); //==return document.getElementById(img1);
		var btn = $id("btnInOut");
		if (btn.value == "淡出") {
			timerId = setInterval(fadeOut, 100);
			
		} else {
			timerId = setInterval(fadeIn, 100);
		}
		btn.disabled = true;
	}

	


	function fadeOut() {
		var img = $id("img1");
		var btn = $id("btnInOut");
		opacity = opacity - 0.05;
		img.style.opacity = opacity;
		if (opacity <= 0) {		//寫小於0的原因是-0.05不會真的這麼剛好-0.05唷~~所以永遠都不會剛好 == 0 !!
			btn.value = "淡入";
			btn.disabled = false;
			clearInterval(timerId);

		}
	}


	function fadeIn() {
		var img = $id("img1");
		opacity = opacity + 0.05;
		img.style.opacity = opacity;
		if (opacity >= 1) {
			btn.value = "淡出";
			btn.disabled = false;
			clearInterval(timerId);

		}
	}


	function init() {
		$id("btnInOut").onclick = changeOpacity;
		
	}

	window.addEventListener("load", init, false);	//loading完要執行

</script>