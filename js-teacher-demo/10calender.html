<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      th {
        background-color: cyan;
      }
      th,
      td {
        padding: 2px 10px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <table border="1">
      <thead>
        <tr>
          <th>日</th>
          <th>一</th>
          <th>二</th>
          <th>三</th>
          <th>四</th>
          <th>五</th>
          <th>六</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
    <script>
      const now = new Date(Date.now());
      const mm = now.getMonth();
      //   取得星期數
      const curWeekday = now.getDay();
      //   取得當天為幾日
      const curDate = now.getDate();
      //   利用當天日期除以7得到的餘數，來判斷同一星期的第一週為幾號
      //   減1表與第一天的差距日數
      const toFirstDate = (curDate % 7) - 1;
      //   利用日數差距得到1號的時候為星期幾
      const firstWeekday = curWeekday - toFirstDate;
      const tds = document.querySelectorAll("td");
      //   將不同天數的月份分開來

      const monthDays=[31,28,31,30,31,30,31,31,30,31,30,31];
      if( mm == 2){
        const yy = now.getFullYear();
         if( yy % 400 == 0){
            totalDays = 29;
         } else if( yy % 100 ==0 ){
            totalDays = 28;
         } else if( yy % 4 == 0){
            totayDays = 29;
         }
      }else{
        totalDays = monthDays[mm];
      }
      
      // const thirtyOneMonths = [1, 3, 5, 7, 8, 10, 12];
      // const thirtyMonths = [4, 6, 9, 11];
      // const january = [2];      
      // const curMonths = now.getMonth() + 1;
      // //   設一個當月份的總天數，再判斷是哪一月份後決定天數
      // let totalDays;
      // if (thirtyOneMonths.indexOf(curMonths)) {
      //   totalDays = 30;
      // } else if (thirtyMonths.indexOf(curMonths)) {
      //   totalDays = 31;
      // } else if (january.indexOf(curMonths)) {
      //   totalDays = 28;
      // }

      for (let i = 0; i < tds.length; i++) {
        //   從當週的1號才開始記錄日期
        if (i >= firstWeekday && i <= totalDays + firstWeekday - 1) {
          tds[i].innerText = i - firstWeekday + 1;
        }
      }
    </script>
  </body>
</html>
